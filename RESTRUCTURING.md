# Project Restructuring Summary

## Changes Made

### 1. **Directory Restructuring**

#### Moved Editor to `src/`
- **From:** `editor/` (root level)
- **To:** `src/editor/`
- **Reason:** Editor is now part of the build process, so it belongs in the source directory alongside the viewer library

#### Created `examples/` Directory
- **Moved files:**
  - `example.html` → `examples/example.html`
  - `example-simple.html` → `examples/example-simple.html`
  - `test.html` → `examples/test.html`
  - `viewer.html` → `examples/viewer.html`
- **Reason:** Consolidates all example and demo files in one location for better organization

### 2. **Build System Updates**

#### Enhanced Rollup Configuration (`rollup.config.js`)
Added 4 new build targets:

**Editor JavaScript:**
- `dist/swt-editor.js` (development, with sourcemap)
- `dist/swt-editor.min.js` (production, minified)

**Editor CSS:**
- `dist/swt-editor.css` (development, with sourcemap)
- `dist/swt-editor.min.css` (production, minified)

**Viewer Library:** (renamed from senangwebs_tour.js)
- `dist/swt.js` (development)
- `dist/swt.min.js` (production)

#### New Dependencies
- Added `rollup-plugin-postcss` for CSS bundling

### 3. **File Updates**

#### Editor Files (`src/editor/`)
**`index.html`:**
- Changed CSS: `css/main.css` → `../../dist/swt-editor.css`
- Changed viewer lib: `../dist/swt.js` → `../../dist/swt.js`
- Replaced individual script imports with: `../../dist/swt-editor.js`

**`js/export-manager.js`:**
- Updated viewer HTML template: `dist/senangwebs_tour.min.js` → `dist/swt.min.js`

**New Entry Points:**
- `editor-entry.js` - Bundles all editor JS modules
- `editor-entry.css` - Imports all editor CSS files

#### Example Files (`examples/`)
Updated all script references:
- `dist/senangwebs_tour.js` → `../dist/swt.js`
- `dist/senangwebs_tour.min.js` → `../dist/swt.min.js`

**Files updated:**
- `example.html`
- `example-simple.html`
- `test.html`
- `viewer.html`

#### Root Files
**`index.html`:**
- Updated links: `editor/index.html` → `src/editor/index.html`
- Updated links: `viewer.html` → `examples/viewer.html`
- Updated links: `example.html` → `examples/example.html`

**`package.json`:**
- Updated main: `dist/senangwebs_tour.js` → `dist/swt.js`
- Added files field: `["dist/", "src/"]`
- Added "editor" to keywords

**`README.md`:**
- Added project structure diagram
- Updated CDN paths to use new filenames
- Documented both viewer and editor dist files

## New Project Structure

```
senangwebs_tour/
├── dist/                    # Built files (generated by npm run build)
│   ├── swt.js              # Viewer library (dev)
│   ├── swt.min.js          # Viewer library (prod)
│   ├── swt-editor.js       # Editor bundle (dev)
│   ├── swt-editor.min.js   # Editor bundle (prod)
│   ├── swt-editor.css      # Editor styles (dev)
│   └── swt-editor.min.css  # Editor styles (prod)
├── src/                     # Source files
│   ├── editor/             # Visual editor (moved from root)
│   │   ├── index.html      
│   │   ├── editor-entry.js    # NEW: JS entry point
│   │   ├── editor-entry.css   # NEW: CSS entry point
│   │   ├── css/            
│   │   └── js/             
│   ├── components/         # A-Frame components
│   ├── index.js            # Library entry point
│   └── *Manager.js         # Core managers
├── examples/               # NEW: Example files directory
│   ├── example.html        
│   ├── example-simple.html 
│   ├── viewer.html         
│   └── test.html           
├── index.html              # Project landing page
├── package.json            
├── rollup.config.js        # Enhanced with editor builds
└── README.md               # Updated with new structure
```

## Build Process

### Command
```bash
npm run build
```

### Output
Creates 6 files in `dist/`:
1. **swt.js** - Viewer library (UMD, development)
2. **swt.min.js** - Viewer library (UMD, minified)
3. **swt-editor.js** - Editor JS (IIFE, development)
4. **swt-editor.min.js** - Editor JS (IIFE, minified)
5. **swt-editor.css** - Editor styles (development)
6. **swt-editor.min.css** - Editor styles (minified)

### Watch Mode
```bash
npm run dev
```
Watches source files and rebuilds on changes.

## Usage

### Using the Viewer Library
```html
<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="dist/swt.min.js"></script>
```

### Using the Editor (Standalone)
Open in browser:
```
http://localhost:8080/src/editor/index.html
```
The editor automatically loads the built CSS and JS from `dist/`.

### Using the Editor (Embedded)
```html
<link rel="stylesheet" href="dist/swt-editor.min.css">
<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="dist/swt.min.js"></script>
<script src="dist/swt-editor.min.js"></script>
```

## Benefits

1. **Unified Build Process:** Both viewer and editor now build together with `npm run build`
2. **Optimized Bundles:** Separate minified production builds for both components
3. **Better Organization:** Clear separation of source, examples, and built files
4. **Easier Distribution:** All distributable files in `dist/` directory
5. **Cleaner Root:** Examples moved to dedicated directory
6. **Source Control:** Editor source code properly organized in `src/`

## Breaking Changes

### File Paths
- All example HTML files moved to `examples/` directory
- Editor moved to `src/editor/` directory
- Library filename changed: `senangwebs_tour.js` → `swt.js`

### For Users
If you were linking to files in the repository:
- Update paths to example files
- Update editor URL
- Update library script tag if using specific filename

### For Developers
- Editor now requires build step before running
- Must run `npm run build` after pulling changes
- Individual editor JS/CSS files should not be edited in `dist/`

## Migration Guide

### If you have existing projects:
1. Run `npm run build` to generate new dist files
2. Update script tags: `senangwebs_tour.js` → `swt.js`
3. Update editor link: `editor/index.html` → `src/editor/index.html`
4. Update example links to `examples/` directory

### For development:
1. Edit source files in `src/editor/js/` or `src/editor/css/`
2. Run `npm run build` or `npm run dev` (watch mode)
3. Test changes via `src/editor/index.html`
4. Editor automatically loads built files from `dist/`

## Notes

- The warning "(!) The emitted file "swt-editor.css" overwrites..." is expected behavior from PostCSS plugin and can be ignored
- Editor still uses vanilla JS classes (no ES6 exports), classes are attached to global window object
- Built files are in .gitignore and should not be committed
- Local server required for testing (CORS): `npm run serve`
